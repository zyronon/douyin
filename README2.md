---
theme: cyanosis
highlight: vs2015
---

# å‰è¨€

éšç€æ‰‹æœºæ€§èƒ½çš„æå‡ï¼Œå¦‚ä»Šç§»åŠ¨ç«¯APPçš„ç”¨æˆ·ä½“éªŒè¶Šæ¥è¶Šå¥½äº†ï¼Œé¡µé¢æµç•…ä¸å¡é¡¿ï¼Œè½¬åœºåŠ¨ç”»ä¼˜é›…åˆä¸æ»‘

è€Œå¤§éƒ¨åˆ†çš„ `web` é¡µé¢ï¼Œå°½ç®¡åŠŸèƒ½ä¸Šæ¯”èµ· `10` å¹´å‰ `jQuery`
æ—¶ä»£ä¸°å¯Œäº†ä¸å°‘ï¼Œä½†ä¼¼ä¹åœ¨ä½¿ç”¨ä½“éªŒä¸Šè¿˜æ˜¯ä¸€å°½éš¾å°½çš„åœ°æ­¥ï¼Œåº”ç”¨æœ€å¹¿æ³›çš„åŠ¨ç”»å¯èƒ½æ˜¯å¼¹æ¡†ç»„ä»¶äº†ï¼Œæ¯•ç«Ÿ `UI` åº“ç›´æ¥æä¾›äº†åŠ¨ç”»

---

è¿™æ˜¯æˆ‘çš„ [**æ¨¡ä»¿æŠ–éŸ³**](https://juejin.cn/column/7357362143396118528) ç³»åˆ—æ–‡ç« çš„ç¬¬å››ç¯‡ï¼šè¿™ç¯‡æˆ‘ä»¬å°†å®ç°é¡µé¢ç¼“å­˜ï¼Œå°±åƒæˆ‘ä»¬è®¿é—®ä¼ ç»Ÿæ–°é—»ç½‘ç«™ä¸€æ ·
> ç¬¬ä¸€ç¯‡ï¼š[200è¡Œä»£ç å®ç°ç±»ä¼¼Swiper.jsçš„è½®æ’­ç»„ä»¶](https://juejin.cn/post/7360512664317018146)  
> ç¬¬äºŒç¯‡ï¼š[å®ç°æŠ–éŸ³ â€œè§†é¢‘æ— é™æ»‘åŠ¨â€œæ•ˆæœ](https://juejin.cn/post/7361614921519054883)  
> ç¬¬ä¸‰ç¯‡ï¼š[Vue è·¯ç”±ä½¿ç”¨ä»‹ç»ä»¥åŠæ·»åŠ è½¬åœºåŠ¨ç”»](https://juejin.cn/post/7362528152777130025)

# æœ€ç»ˆæ•ˆæœ

åœ¨çº¿é¢„è§ˆï¼š[dy.ttentau.top/](https://dy.ttentau.top/)

Githubåœ°å€ï¼š[https://github.com/zyronon/douyin](https://github.com/zyronon/douyin)

è·¯ç”±å®šä¹‰æºç ï¼š[routes.ts](https://github.com/zyronon/douyin/blob/master/src/router/routes.ts)  
è½¬åœºåŠ¨ç”»æºç ï¼š[App.vue](https://github.com/zyronon/douyin/blob/master/src/App.vue)

## æ€è€ƒ

- å¦‚ä½•åˆ¤æ–­æ˜¯â€œå‰è¿›â€è¿˜æ˜¯â€œåé€€â€è€Œä½¿ç”¨ä¸åŒçš„åŠ¨ç”»æ–¹å¼ï¼Ÿ

# ä¸€ã€è·¯ç”±ä½¿ç”¨

## 1. åˆå§‹åŒ–è·¯ç”±

```js
import Vue from 'vue'
import { createRouter, createWebHashHistory, createWebHistory } from 'vue-router'

const router = createRouter({
  history: createWebHashHistory(),
  routes,
  scrollBehavior(to, from, savedPosition) {
    if (savedPosition) {
      return savedPosition
    } else {
      return { top: 0 }
    }
  }
})

...

const app = createApp(App)
app.use(router)
```

## 2. å®šä¹‰è·¯ç”±

æ¥ä¸‹æ¥å°±å¯ä»¥è¿›è¡Œè·¯ç”±ç»„ä»¶çš„æ˜ å°„ï¼š  
ä¸ºäº†è·µè¡Œæ¨¡å—åŒ–ç»„ä»¶åŒ–æ€æƒ³ï¼Œç»„ä»¶æ˜¯ä»å…¶ä»–æ–‡ä»¶importè¿›æ¥

---
å¯ä»¥ `é™æ€` å¯¼å…¥(åœ¨æ–‡ä»¶é¡¶éƒ¨ç”¨ `import` å¯¼å…¥ç»„ä»¶) ä½¿ç”¨

```js
import Home from '../pages/home/index.vue'
```

é™æ€å¯¼å…¥çš„ç»„ä»¶ä¼š `å…¨éƒ¨` é»˜è®¤æ‰“åŒ…åˆ°ä¸€ä¸ª `js` æ–‡ä»¶ä¸­

--- 

ä¹Ÿå¯ä»¥ `åŠ¨æ€` å¯¼å…¥ä½¿ç”¨

```js
{
  path: '/home', component
:
  () => import('@/pages/home/index.vue')
}
,
```

åŠ¨æ€çš„å¯¼å…¥çš„ `æ¯ä¸€ä¸ª` ç»„ä»¶ï¼Œä¼šè¢«å•ç‹¬æ‰“åŒ…æˆä¸€ä¸ª `js` æ–‡ä»¶ï¼Œä¸€å¯¹ä¸€çš„ï¼Œå®šä¹‰äº† `50` ä¸ªè·¯ç”±ï¼Œå°±ä¼šæ‰“åŒ…å‡º `50` ä¸ª `js`
æ–‡ä»¶ï¼ˆå½“ç„¶æˆ‘ä»¬å¯ä»¥åœ¨ `vite.config.js` æˆ– `vue.config.js` é‡Œé¢é…ç½®æ‰“åŒ…åˆ†å‰²ï¼Œå°†ç»„ä»¶è¿›è¡Œåˆ†ç»„ç»Ÿä¸€æ‰“åŒ…åˆ°ä¸€ä¸ª `js` æ–‡ä»¶ä¸­ï¼‰

---

```js
import Home from '../pages/home/index.vue'
import Test from '../pages/test/Test.vue'

//åˆ›å»ºroutesæ•°ç»„ï¼Œç„¶åä¼ å…¥ createRouter çš„ â€˜routesâ€™ é…ç½®ä¸­
const routes = [
  //æ¯ä¸ªè·¯ç”±æ˜ å°„ä¸€ä¸ªç»„ä»¶
  { path: '/', redirect: '/home' },
  { path: '/test', component: Test },
  { path: '/home', component: Home },
```

## 3. è·¯ç”±å‡ºå£

```js 
App.vue

< router - view > < /router-view>
```

æˆ‘ä»¬å®šä¹‰å¥½äº†è·¯ç”±æ˜ å°„ä¹‹åï¼Œè¿˜éœ€è¦å®šä¹‰ä¸€ä¸ªè·¯ç”±`å‡ºå£`ï¼Œå³ `<router-view></router-view>`
ï¼Œè¿™ä¸ªæ ‡ç­¾æ”¾åœ¨å“ªä¸ªä½ç½®ï¼Œå“ªä¸ªä½ç½®å°±ä¼šæ˜¾ç¤ºå½“å‰æ‰€åŒ¹é…è·¯ç”±æ˜ å°„çš„ `Vue` ç»„ä»¶

é»˜è®¤æˆ‘ä»¬æ˜¯æ”¾åœ¨ `App.vue` é‡Œé¢ï¼Œè¿™æ ·å°±å¯ä»¥è®¿é—®æ‰€æœ‰å®šä¹‰çš„ `ä¸€çº§` è·¯ç”±äº†

## 4. åµŒå¥—è·¯ç”±

ä¸Šé¢åªæ˜¯è·¯ç”±çš„æ™®é€šä½¿ç”¨ï¼Œåªèƒ½è®¿é—®ä¸€çº§é¡µé¢ï¼Œä½†æˆ‘ä»¬åšåå°ã€ç®¡ç†ç³»ç»Ÿç­‰ç½‘ç«™ï¼ŒåŸºæœ¬ä¸Šéƒ½æœ‰åµŒå¥—è·¯ç”±çš„è¦æ±‚  
åµŒå¥—è·¯ç”±åªéœ€åœ¨ `children` å­—æ®µé‡Œæ”¾åŒæ ·çš„è·¯ç”±æ˜ å°„å³å¯

```js
{
  path: '/layout',
    component
:
  Layout,
    children
:
  [
    { path: '/layout-child1', component: LayoutChild1 },
    { path: '/layout-child2', component: LayoutChild1 },
    { path: '/layout-child3', component: LayoutChild1 },
  ]
}
,
```

å†å®šä¹‰å­è·¯ç”± `å‡ºå£`ï¼ŒåŒæ ·è¿˜æ˜¯ `<router-view></router-view>` æ ‡ç­¾ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ªæ ‡ç­¾æ”¾åœ¨å“ªé‡Œï¼Œå°±ä¼šæ˜¾ç¤ºå½“å‰åŒ¹é…çš„ç»„ä»¶  
æˆ‘ä»¬åœ¨ `App.vue` é‡Œé¢æ”¾äº†ä¸€ä¸ªï¼Œé‚£ä¹ˆ `App.vue` å°±ä¼šæ˜¾ç¤ºå½“å‰æ‰€åŒ¹é…è·¯ç”±æ˜ å°„çš„ `Vue` ç»„ä»¶

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/85d99428370e4547b9e053fc7a322a9c~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1211&h=600&s=46014&e=png&b=2c2c2c)

å­è·¯ç”±çš„å‡ºå£ä¹Ÿæ˜¯åŒæ ·çš„ï¼Œä½ æƒ³åœ¨åœ¨å“ªæ˜¾ç¤ºå°±æ”¾åœ¨å“ªé‡Œï¼Œæˆ‘ä»¬çš„ `Layout.vue` ç»„ä»¶éœ€è¦æœ‰å­è·¯ç”±ï¼Œé‚£ä¹ˆå°±æ”¾åœ¨ `Layout.vue` é‡Œé¢å°±è¡Œäº†

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/18d7110fa2a043869bd5bbf4607a1101~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1150&h=565&s=42350&e=png&b=2b2b2b)

# äºŒã€è½¬åœºåŠ¨ç”»

æˆ‘ä»¬éœ€è¦ç”¨åˆ° `Vue` çš„ `Transition` è¿™ä¸ªç»„ä»¶  
å…·ä½“ä½¿ç”¨è¯·çœ‹å®˜ç½‘ï¼Œè¿™é‡Œä¸è¯¦ç»†ä»‹ç»  
https://cn.vuejs.org/guide/built-ins/transition.html

è¿˜ç”¨åˆ°äº† `css` çš„ `transform` å±æ€§ï¼Œå®ƒå…è®¸ä½ æ—‹è½¬ï¼Œç¼©æ”¾ï¼Œå€¾æ–œæˆ–å¹³ç§»ç»™å®šå…ƒç´ ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥å¹³ç§»ä¸¤ä¸ªè·¯ç”±é¡µé¢  
https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform

è¿˜ç”¨åˆ°äº† `css` çš„ `transition` å±æ€§ï¼Œå®ƒå¯ä»¥ä½¿åœ¨ä¸åŒ `css` å±æ€§çŠ¶æ€åˆ‡æ¢çš„æ—¶å€™äº§ç”Ÿè¿‡æ¸¡æ•ˆæœ(å¯ä»¥ç†è§£ä¸ºç®€å•åŠ¨ç”»)
ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥ç»™ `transform` åŠ è¿‡æ¸¡æ•ˆæœ  
https://developer.mozilla.org/zh-CN/docs/Web/CSS/transition

## 1. Transitionç»„ä»¶

```js
Vue3
< router - view
v - slot = "{ Component }" >
  < transition
:
name = "transitionName" >
  < component
:
is = "Component" / >
  < /transition>
</router-view>

Vue2
< transition
:
name = "transitionName" >
  < router - view > < /router-view>
</transition>
```

**éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`Vue3` å’Œ `Vue2` çš„å†™æ³•ä¸åŒ**

- `transition` ä¸­ `name` å±æ€§ç”¨äºå®šä¹‰åŠ¨ç”»ï¼Œ `Vue` ä¼šæ ¹æ®æä¾›çš„ `name` å€¼å»å¯»æ‰¾å¯¹åº”çš„ `css`
  ç±»åï¼Œå¹¶åœ¨åˆé€‚çš„æ—¶æœºæ·»åŠ ã€ç§»é™¤ `css` ç±»å
- `transition` çš„å­å…ƒç´ åªèƒ½æœ‰ä¸€ä¸ªï¼Œå¹¶ä¸”å½“å­å…ƒç´ ç¬¦åˆä»¥ä¸‹æ¡ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘
    - ç”±`v-if`æ‰€è§¦å‘çš„åˆ‡æ¢
    - ç”±`v-show`æ‰€è§¦å‘çš„åˆ‡æ¢
    - ç”±ç‰¹æ®Šå…ƒç´ `<component>`åˆ‡æ¢çš„åŠ¨æ€ç»„ä»¶
    - æ”¹å˜ç‰¹æ®Šçš„`key`å±æ€§

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5da8717d561a4e6b978c12a30653ac80~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1126&h=780&s=79926&e=png&b=141516)

æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å°† `name` å®šä¹‰ä¸º `test`ï¼Œé‚£ä¹ˆæ¯æ¬¡åŠ¨ç”»æ‰§è¡Œæ—¶ï¼Œ`Vue` ä¼šè‡ªåŠ¨ç»™æˆ‘ä»¬æ·»åŠ ä¸Šå›¾çš„ 6 ä¸ª `css`
ç±»åï¼š`test-enter-from` `test-enter-active` `test-enter-to` `test-leave-from` `test-leave-active` `test-leave-to`

---

å½“æˆ‘ä»¬å‰è¿›æ—¶ï¼š  
**å½“å‰é¡µé¢éœ€è¦ä» 0ï¼ˆå±å¹•ä¸­é—´ï¼‰ å¹³ç§»è‡³ -100%ï¼ˆå±å¹•å·¦ä¾§ï¼‰ ï¼Œä¸‹ä¸ªé¡µé¢ éœ€è¦ä» 100%ï¼ˆå±å¹•å³ä¾§ï¼‰ å¹³ç§»è‡³ 0ï¼ˆå±å¹•ä¸­é—´ï¼‰**

å½“æˆ‘ä»¬åé€€æ—¶ï¼š  
**å½“å‰é¡µé¢éœ€è¦ä» 0ï¼ˆå±å¹•ä¸­é—´ï¼‰ å¹³ç§»è‡³ 100%ï¼ˆå±å¹•å³ä¾§ï¼‰ ï¼Œä¸‹ä¸ªé¡µé¢ éœ€è¦ä» -100%ï¼ˆå±å¹•å·¦ä¾§ï¼‰ å¹³ç§»è‡³ 0ï¼ˆå±å¹•ä¸­é—´ï¼‰**

æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸¤ç§åŠ¨ç”»ï¼Œä¸€ç§æ˜¯ `å‰è¿›` ï¼Œä¸€ç§æ˜¯ `è¿”å›`ï¼Œä¸åŒçŠ¶æ€å±•ç¤ºä¸åŒåŠ¨ç”»

å…·ä½“ä½¿ç”¨ä»€ä¹ˆåŠ¨ç”»ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªå˜é‡ `transitionName` æ¥å®šä¹‰

## 2.åŠ¨ç”»

æˆ‘ä»¬åœ¨å‰è¿›æ—¶ï¼Œå½“å‰é¡µé¢å’Œä¸‹ä¸ªé¡µé¢çš„éœ€è¦æ‰§è¡Œçš„åŠ¨ç”»æ˜¯ä¸åŒçš„ï¼Œåé€€æ—¶ä¹Ÿä¸€æ ·

è¿™é‡Œç›´æ¥æ”¾æœ€ç»ˆçš„ `css` ä»£ç ï¼Œ
ä¸‹é¢è§£é‡Šä¸ºä»€ä¹ˆè¿™æ ·å†™

### å‰è¿›åŠ¨ç”»

```css
/
/é¡µé¢æœ€ç»ˆ/ æœ€åˆçš„çŠ¶æ€ï¼šå±å¹•æ­£ä¸­é—´
.go-enter-to,
.go-leave-from {
    transform: translate3d(0, 0, 0);
}

/
/
åŠ¨ç”»æŒç»­æ—¶é—´
.go-enter-active,
.go-leave-active {
    transition: all 0.3s;
}

/
/
ç¦»å»åŠ¨ç”»ï¼Œè¡¨ç¤ºç¦»å»é¡µé¢æœ€ç»ˆçš„cssï¼šå±å¹•å·¦ä¾§
.go-leave-to {
    transform: translate3d(-100%, 0, 0);
}

/
/
è¿›å…¥åŠ¨ç”»ï¼Œè¡¨ç¤ºè¿›å…¥é¡µé¢ï¼Œåˆå§‹çš„çŠ¶æ€ï¼šå±å¹•å³ä¾§
.go-enter-from {
    transform: translate3d(100%, 0, 0);
}
```

### åé€€åŠ¨ç”»

```css
/
/
å’Œä¸Šé¢åŒç†ï¼Œåªæ—¶ css æ˜¯åç€çš„è€Œå·²
.back-enter-to,
.back-enter-from {
    transform: translate3d(0, 0, 0);
}

.back-enter-active,
.back-leave-active {
    transition: all 0.3s;
}

.back-enter-from {
    transform: translate3d(-100%, 0, 0);
}

.back-leave-to {
    transform: translate3d(100%, 0, 0);
}
```

## 3. åŠ¨ç”»åŸç†

**ä¸¤ä¸ªé¡µé¢å¹³ç§»åŠ¨ç”»çš„åŸç†ï¼š**

å½“æˆ‘ä»¬å‰è¿›æ—¶ï¼š  
**å½“å‰é¡µé¢éœ€è¦ä» 0ï¼ˆå±å¹•ä¸­é—´ï¼‰ å¹³ç§»è‡³ -100%ï¼ˆå±å¹•å·¦ä¾§ï¼‰ ï¼Œä¸‹ä¸ªé¡µé¢ éœ€è¦ä» 100%ï¼ˆå±å¹•å³ä¾§ï¼‰ å¹³ç§»è‡³ 0ï¼ˆå±å¹•ä¸­é—´ï¼‰**

å½“æˆ‘ä»¬åé€€æ—¶ï¼š  
**å½“å‰é¡µé¢éœ€è¦ä» 0ï¼ˆå±å¹•ä¸­é—´ï¼‰ å¹³ç§»è‡³ 100%ï¼ˆå±å¹•å³ä¾§ï¼‰ ï¼Œä¸‹ä¸ªé¡µé¢ éœ€è¦ä» -100%ï¼ˆå±å¹•å·¦ä¾§ï¼‰ å¹³ç§»è‡³ 0ï¼ˆå±å¹•ä¸­é—´ï¼‰**

---

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e0c495db95024e2cbcc8e120785de9e0~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=1903&h=1101&s=534472&e=png&b=292f31)

é€šè¿‡ä¸Šå›¾å¯ä»¥çœ‹åˆ°  
ä¸€ã€å½“æˆ‘ä»¬å¯¼èˆªåˆ°ä¸‹ä¸€é¡µæ—¶ï¼Œä¸¤ä¸ªè·¯ç”±é¡µé¢æœ€å¤–å±‚çš„ `div` æ˜¯å¹³çº§çš„ï¼Œæ‰€ä»¥å½“åŠ¨ç”»æ‰§è¡Œæ—¶ï¼Œ*
*ä¼šçœ‹åˆ°å½“å‰é¡µé¢ä»å±å¹•ä¸­é—´å‘å·¦å¹³ç§»å‡ºå»äº†ï¼Œä½†ä¸‹ä¸ªé¡µé¢å¹¶æ²¡æœ‰ä»å±å¹•å³ä¾§å‘å±å¹•ä¸­é—´å¹³ç§»ï¼Œè€Œæ˜¯åœ¨åŠ¨ç”»ç»“æŸåï¼Œçªç„¶æ˜¾ç¤ºåœ¨å±å¹•ä¸­é—´**
ã€‚è¿™æ˜¯å› ä¸ºæŒ‰ç…§æ­£å¸¸çš„æ–‡æ¡£æµï¼Œä¸¤ä¸ªé¡µé¢æœ€å¤–å±‚çš„ `div` éƒ½æ˜¯ `block` ï¼Œæ‰€ä»¥ä¸‹ä¸ªé¡µé¢å•èµ·ä¸€è¡Œæ”¾åœ¨å½“å‰é¡µé¢çš„æ­£ä¸‹æ–¹

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c4eca4719d7a46cbbae1a5460590ae9e~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=387&h=671&s=22122&e=webp&f=30&b=ffff01)

è§£å†³åŠæ³•ï¼šç»™æ¯ä¸ªé¡µé¢åŠ ä¸ªç»Ÿä¸€çš„ `class` ï¼Œå°†é¡µé¢ç»Ÿä¸€è®¾ç½®ä¸º `position:absolute;`ï¼Œæ­¤æ—¶é¡µé¢è„±ç¦»æ–‡æ¡£æµï¼Œä¸å ç©ºé—´ï¼Œè¿™æ ·å°±ä¸ä¼šæŠŠä¸‹ä¸€é¡µæŒ¤ä¸‹å»ï¼Œå®Œæˆå¹³æ»‘è¿‡æ¸¡

äºŒã€ç”±å›¾å¯çŸ¥ï¼Œç¦»å»çš„é¡µé¢ `Vue` ä¼šè‡ªåŠ¨ç»™æˆ‘ä»¬åŠ ä¸Š `xxx-leave-active, xxx-leave-to` è¿™ä¸¤ä¸ª `class`  
è€Œè¿›å…¥çš„é¡µé¢ï¼Œ`Vue` ä¼šè‡ªåŠ¨ç»™æˆ‘ä»¬åŠ ä¸Š `xxx-enter-active, xxx-enter-to` è¿™ä¸¤ä¸ª `class`  
è¿˜æœ‰è¿™ `xxx-leave-from, xxx-enter-from`ä¸¤ä¸ª `class` æ˜¯åŠ¨ç”»ä¸€å¼€å§‹å°±åŠ ä¸Šï¼Œç„¶åç«‹åˆ»åˆåˆ é™¤äº†ï¼Œæˆªå›¾é‡Œé¢å±•ç¤ºä¸å‡ºæ¥ğŸ˜…

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ded4aeb71d8d49be8fb82d9ffd1982ee~tplv-k3u1fbpfcp-jj-mark:0:0:0:0:q75.image#?w=962&h=1187&s=134873&e=png&b=ffffff)

æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬çŸ¥é“ `Vue` æ‰§è¡ŒåŠ¨ç”»æ—¶æœ‰å“ªäº› `class`ï¼Œå°±å¯ä»¥å¯¹åº”çš„ç¼–å†™ `css` è¿‡æ¸¡äº†

å°±æ‹¿ **å‰è¿›** æ—¶ **ç¦»å»çš„é¡µé¢** ä¸¾ä¾‹ï¼š

- åŠ¨ç”»å¼€å§‹ï¼š`go-leave-from`ï¼Œç„¶ååˆç«‹é©¬å°±åˆ é™¤äº†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ª `class` ç¼–å†™ç”¨äºå¯åŠ¨è¿‡æ¸¡çš„ `css` ï¼Œç”¨äºè¡¨æ˜è¿™ä¸ªé¡µé¢çš„åˆå§‹çŠ¶æ€

```css
/
/
é¡µé¢çš„åˆå§‹çŠ¶æ€
.go-leave-from {
    transform: translate3d(0, 0, 0);
}
```

- åŠ¨ç”»è¡Œç¨‹ä¸­ï¼š`go-leave-active, go-leave-to`ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå®šä¹‰æ•´ä¸ªè¿‡æ¸¡çš„æ—¶é—´ï¼Œä»¥åŠæˆ‘ä»¬é¡µé¢æœ€ç»ˆçš„ `css` çš„æ ·å¼

```css
/
/
æ•´ä¸ªè¿‡æ¸¡è¿‡ç¨‹éœ€è¦300æ¯«ç§’
.go-leave-active {
    transition: all 0.3s;
}

/
/
æœ€ç»ˆçŠ¶æ€ï¼Œå½“åŠ¨ç”»ç»“æŸæ—¶ï¼Œé¡µé¢éœ€è¦ å¹³ç§»åˆ°

-
100
%
çš„åœ°æ–¹
.go-leave-to {
    transform: translate3d(-100%, 0, 0);
}
```

å…¶ä»–çš„åŠ¨ç”»ï¼ŒåŸºæœ¬åŒç†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŒä¸€ä¸ªåŠ¨ç”»ä¸­ï¼Œç¦»å»çš„é¡µé¢å’Œè¿›å…¥çš„é¡µé¢çš„ `translate3d` æ˜¯ç›¸åçš„

## 4. åŒºåˆ†æ˜¯â€œå‰è¿›â€è¿˜æ˜¯â€œåé€€â€

`$route` ä½œä¸º `vue` å®ä¾‹çš„ä¸€ä¸ªå“åº”å¼å±æ€§ï¼Œå’Œåœ¨ `data` ä¸­å†™çš„å±æ€§æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä»¥é€šè¿‡ `this`
çš„æ–¹å¼æ‹¿åˆ°ã€‚æ—¢ç„¶ä½ å¯ä»¥ç›‘å¬ `data` ä¸­çš„å±æ€§å˜åŒ–ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ç›‘å¬ `$route` çš„å˜åŒ–ã€‚`watch`
ä¸­ç›‘å¬çš„å¯¹è±¡é»˜è®¤å›è°ƒå‡½æ•°ä¸­çš„å‚æ•°å€¼å°±æ˜¯ `newVal, oldVal`ã€‚ä½œä¸º `$route` å±æ€§æ¥è¯´å½“ç„¶ä¹Ÿå°±æ˜¯ `to` å’Œ `from` çš„æ¦‚å¿µäº†

`toã€from` æ˜¯æœ€åŸºæœ¬çš„è·¯ç”±å¯¹è±¡ï¼Œåˆ†åˆ«è¡¨ç¤ºä»(`from`)æŸä¸ªé¡µé¢è·³è½¬åˆ°(`to`)å¦ä¸€ä¸ªé¡µé¢ï¼Œ`to.path`
ï¼ˆè¡¨ç¤ºè¦è·³è½¬åˆ°çš„è·¯ç”±åœ°å€ï¼‰ï¼Œ`from.path` åŒç†

**è¯¥åŠŸèƒ½çš„éš¾ç‚¹åœ¨äºæ€æ ·åˆ†è¾¨æ˜¯â€œå‰è¿›â€è¿˜æ˜¯â€œåé€€â€ï¼Ÿ**

è¿˜è®°å¾—æˆ‘ä»¬å‰é¢å®šä¹‰çš„ `routes` æ•°ç»„å—ï¼Ÿæˆ‘ä»¬ç°åœ¨éœ€è¦å°†æ¯ä¸ªè·¯ç”±**æŒ‰å±‚çº§ä¾æ¬¡æ’åº**(æš‚ä¸è€ƒè™‘åµŒå¥—è·¯ç”±çš„æƒ…å†µ)
ï¼Œä¾æ¬¡æ’åˆ—æ¯ä¸ªè·¯ç”±çš„ä¸‹ä¸€é¡µã€ä¸‹ä¸‹é¡µ...å³ä¿è¯æ¯ä¸ªâ€œä¸Šä¸€é¡µâ€åœ¨â€œä¸‹ä¸€é¡µâ€å‰é¢

æ€»ç»“ä¸‹æ¥å°±æ˜¯ï¼šæ ¹æ® `routes` æ•°ç»„é‡Œå®šä¹‰çš„è·¯ç”±ç›®å½•çš„é¡ºåºï¼Œåœ¨ `watch` åˆ°è·¯ç”±å˜æ›´çš„æ—¶å€™ï¼Œç”¨ `to.path` å’Œ `from.path`
å» `routes` æ•°ç»„é‡Œå»æŸ¥æ‰¾ä¸‹æ ‡ï¼Œ**ä¸‹æ ‡é å‰çš„æ˜¯ä¸Šä¸€é¡µï¼Œé åçš„æ˜¯ä¸‹ä¸€é¡µï¼Œå¯ç”±æ­¤åˆ¤æ–­æ˜¯â€œå‰è¿›â€è¿˜æ˜¯â€œåé€€â€**

### Vue2å†™æ³•

```js
// watch $route å†³å®šä½¿ç”¨å“ªç§è¿‡æ¸¡
watch: {
  '$route'(to, from)
  {
    //åº•éƒ¨tabçš„æŒ‰é’®ï¼Œè·³è½¬æ˜¯ä¸éœ€è¦ç”¨åŠ¨ç”»çš„
    let noAnimation = ['/', '/home', '/slide', '/me', '/attention', '/message', '/publish']
    if (noAnimation.indexOf(from.path) !== -1 && noAnimation.indexOf(to.path) !== -1) {
      return this.transitionName = ''
    }

    const toDepth = routes.findIndex(v => v.path === to.path)
    const fromDepth = routes.findIndex(v => v.path === from.path)
    this.transitionName = toDepth > fromDepth ? 'go' : 'back'
  }
,
}
,
```

### Vue3å†™æ³•

```js
const route = useRoute()

// watch $route å†³å®šä½¿ç”¨å“ªç§è¿‡æ¸¡
watch(
  () => route.path,
  (to, from) => {
    //åº•éƒ¨tabçš„æŒ‰é’®ï¼Œè·³è½¬æ˜¯ä¸éœ€è¦ç”¨åŠ¨ç”»çš„
    let noAnimation = ['/', '/home', '/slide', '/me', '/attention', '/message', '/publish']
    if (noAnimation.indexOf(from) !== -1 && noAnimation.indexOf(to) !== -1) {
      return transitionName.value = ''
    }
    const toDepth = routes.findIndex((v: RouteRecordRaw) => v.path === to)
    const fromDepth = routes.findIndex((v: RouteRecordRaw) => v.path === from)
    transitionName.value = toDepth > fromDepth ? 'go' : 'back'
  }
)
``` 

## æ€»ç»“

è‡³æ­¤æˆ‘ä»¬å·²ç»å­¦ä¼šäº†è·¯ç”±ä½¿ç”¨ï¼Œä»¥åŠå¦‚ä½•åœ¨ `Vue`
ä¸­æ€ä¹ˆç»™è·¯ç”±æ·»åŠ è½¬åœºåŠ¨ç”»äº†ï¼Œæˆ‘æ–‡ç« ä¸­æ‰€ä»‹ç»çš„åªæ˜¯æ™®é€šçš„å¹³ç§»åŠ¨ç”»ï¼Œå¤§å®¶å¦‚æœæƒ³è¦å…¶ä»–æ ·å¼çš„åŠ¨ç”»ï¼Œåªéœ€è¦å¯¹ç…§ç€é‚£å‡ ä¸ª `Vue`
å®šä¹‰çš„é‚£å‡ ä¸ª `css` ä¿®æ”¹å°±å¯ä»¥äº†

æœ¬æ¥æƒ³æŠŠ `é¡µé¢ç¼“å­˜` ä¹Ÿä¸€èµ·å†™äº†ï¼Œä¸è¿‡ç”±äºç¯‡å¹…æ‰€è‡´ï¼Œå¾ˆå¤šäººéƒ½æ˜¯ `å¤ªé•¿ä¸çœ‹`ï¼Œæ‰€ä»¥è¿˜æ˜¯å•ç‹¬å†™ä¸€ç¯‡å§~

# ç»“æŸ

>
ä»¥ä¸Šå°±æ˜¯æ–‡ç« çš„å…¨éƒ¨å†…å®¹ï¼Œæ„Ÿè°¢çœ‹åˆ°è¿™é‡Œï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©æˆ–å¯å‘ï¼åˆ›ä½œä¸æ˜“ï¼Œå¦‚æœè§‰å¾—æ–‡ç« å†™å¾—ä¸é”™ï¼Œå¯ä»¥ç‚¹èµæ”¶è—æ”¯æŒä¸€ä¸‹ï¼Œæˆ‘ä¼šæ›´æ–°æ›´å¤šå®ç”¨çš„å‰ç«¯çŸ¥è¯†ä¸æŠ€å·§ï¼ŒæœŸå¾…ä¸ä½ å…±åŒæˆé•¿~



